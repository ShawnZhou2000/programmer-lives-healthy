<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
		<meta name="description" content="" />
		<meta name="author" content="" />
		<title>忘记密码 - Programmer lives healthy</title>
		<link href="css/styles.css" rel="stylesheet" />
		<link href="css/custom.css" rel="stylesheet" />
		<link rel="icon" type="image/x-icon" href="assets/img/favicon.png" />
		<script src="/js/jquery-3.4.1.js"></script>
		<script src="/js/sendmail.js"></script>
		<script src="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.11.2/js/all.min.js"></script>
		<script src="https://cdn.bootcdn.net/ajax/libs/feather-icons/4.28.0/feather.min.js"></script>
	</head>
	<body class="bg-primary">
		<div id="layoutAuthentication">
			<div id="layoutAuthentication_content">
				<main>
					<div class="container">
						<div class="row justify-content-center">
							<div class="col-xl-5 col-lg-6 col-md-8 col-sm-11">
								<div class="card my-5 nitai2">
									<div class="card-body pl-5 pr-5 pt-5 pb-0 text-center">
										<div class="h3 font-weight-light mb-0">忘记密码</div>
									</div>
									<div class="card-body p-5">
										<div class="small text-muted mb-4">输入你的邮箱，我们将发送一封邮件以确认你的身份。</div>
										<form action="/resetPassword" method="post">
											<div class="row">
												<div class="col-12">
													<label class="text-gray-600 small" style="display: block;">邮箱(填写后请点击按钮进行验证)</label>
													<div class="form-group input-group .roundbd-l">
														<input class="form-control form-control-solid py-4" type="text" placeholder="" aria-label="Email Address"
														 aria-describedby="emailExample" name="email" id="email" />
														<input value="0" type="hidden" name="type" id="type">
														<div class="input-group-append">
															<button onclick="send()" id="btnsend" type="button" class="btn btn-primary input-group-text">
																发送
															</button>
														</div>
													</div>
												</div>
												<div class="col-12">
													<div class="form-group ">
														<label class="text-gray-600 small">验证码</label>
														<input class="form-control form-control-solid py-4" type="text" name="verificationCode" />
													</div>
												</div>
												<div class="col-12">
													<div class="form-group ">
														<label class="text-gray-600 small">新密码</label>
														<input class="form-control form-control-solid py-4" id="newPassword" type="password" name="newPassword" />
													</div>
												</div>
												<div class="col-12">
													<div class="form-group ">
														<label class="text-gray-600 small">确认密码</label>
														<input onblur="checkok()" class="form-control form-control-solid py-4" id="newPassword2" type="password" name="newPassword2" />
													</div>
												</div>
												<div class="col-12">
													<p th:text="${msg}" id="errmsg" class="text-danger" th:if="${not #strings.isEmpty(msg)}"></p>
													<p id="errmsg2" class="text-danger"></p>
												</div>
												<div class="col-12">
													<div class="form-group d-flex align-items-center justify-content-between">
														<button disabled class="btn btn-primary btn-block mt-3" id="postbtn" type="submit">
															重置密码
														</button>
													</div>
												</div>
											</div>
										</form>
									</div>
									<div class="card-body px-5 py-4">
										<div class="small text-center">新用户?<a href="/register">点击创建一个新账户</a></div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</main>
			</div>
			<div id="layoutAuthentication_footer">
				<footer class="footer mt-auto footer-dark">
					<div class="container-fluid">
						<div class="row">
							<div class="col-md-6 small">Copyright &copy; 2020 友人 & 饭盒君 联合出品</div>
						</div>
					</div>
				</footer>
			</div>
		</div>
		<script src="https://cdn.staticfile.org/popper.js/1.15.0/umd/popper.min.js"></script>
		<script src="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
		<script src="/js/scripts.js"></script>
		<script type="text/javascript">
			function checkok() {
				let ps1 = document.getElementById("newPassword").value;
				let ps2 = document.getElementById("newPassword2").value;
				if (ps1 != ps2) {
					document.getElementById("errmsg2").innerHTML = "两次输入的密码不一致，请重试。";
					document.getElementById("postbtn").disabled = true;
				}
				else {
					document.getElementById("errmsg2").innerHTML = "";
					document.getElementById("postbtn").disabled = false;
				}
			}
		</script>
	</body>
</html>
